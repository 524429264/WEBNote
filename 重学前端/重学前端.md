# 重学前端

### 浏览器是如何工作的

#### URL到显示网页全过程：

1.浏览器首先使用 HTTP 协议或者 HTTPS 协议，向服务端请求页面；

2.把请求回来的 HTML 代码经过解析，构建成 DOM 树；

3.计算 DOM 树上的 CSS 属性；

4.最后根据 CSS 属性对元素逐个进行渲染，得到内存中的位图；

5.一个可选的步骤是对位图进行合成，这会极大地增加后续绘制的
速度；

6.合成之后，再绘制到界面上。


最后，留给你一个小练习：我们现在要实现一个红绿灯，把一个圆形 div 按照绿色 3 秒，黄色 1 秒，红色 2 秒循环改变背景色，你会怎样编写这个代码呢？欢迎你留言讨论。

```js
    function sleep(duration) {
      return new Promise(function (resolve) {
        setTimeout(resolve, duration);
      })
    }
    async function changeColor(duration, color) {
      document.getElementById("traffic-light").style.background = color;
      await sleep(duration);

    }
    async function main() {
      while (true) {
        await changeColor(3000, "green");
        await changeColor(1000, "yellow");
        await changeColor(2000, "red");
      }
    }
    main()
```

